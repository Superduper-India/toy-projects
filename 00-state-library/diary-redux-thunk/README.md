# ë¦¬ë•ìŠ¤ ë–µí¬(Redux Thunk)
ğŸ“ƒ ê³µì‹ë¬¸ì„œë¥¼ ì½ìœ¼ë©´ì„œ ê³µë¶€í•œ ë‚´ìš©ì„ ì •ë¦¬í•˜ê³ , í† ì´í”„ë¡œì íŠ¸ì— ì§ì ‘ ì ìš©í•´ë´…ë‹ˆë‹¤
<br />

# ğŸ’¡ í•µì‹¬ ê°œë…
> ### ì°¸ê³ ìë£Œ
> [ë¦¬ë•ìŠ¤ ê³µì‹ë¬¸ì„œ - API ì°¸ì¡°](https://redux.js.org/api/applymiddleware)
> [ë¦¬ë•ìŠ¤ ê³µì‹ë¬¸ì„œ - Thunks](https://redux.js.org/usage/writing-logic-thunks)
<br/>
> [Redux Thunk Github](https://github.com/reduxjs/redux-thunk)

## Thunksë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ?
ì½í¬ë¥¼ ì‚¬ìš©í•˜ë©´ UIë ˆì´ì–´ì™€ ë³„ë„ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì¶”ê°€ì ì¸ Reduxê´€ë ¨ ë¡œì§ì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.
* ë¹„ë™ê¸° ìš”ì²­ ë˜ëŠ” ì„ì˜ ê°’ ìƒì„±ê³¼ ê°™ì€ side effectsì²˜ë¦¬í•˜ê¸° (ì•„ë§ˆ isLoading, isErrorê°™ì€ ê±°ì¼ë“¯..?)
* ì—¬ëŸ¬ ì‘ì—…ì„ ë””ìŠ¤íŒ¨ì¹˜í•˜ê±°ë‚˜ Redux ìŠ¤í† ì–´ ìƒíƒœì— ì•¡ì„¸ìŠ¤

ì¦‰, ì„ì˜ì˜ ë…¼ë¦¬ë¥¼ í¬í•¨í•  ìˆ˜ ìˆëŠ” ë²”ìš© ë„êµ¬ë¡œ, ë‹¤ì–‘í•œ ìš©ë„ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ê°€ì¥ ì¼ë°˜ì ì¸ ì‚¬ìš©ì‚¬ë¡€ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.
* ì»´í¬ë„ŒíŠ¸ì—ì„œ ë³µì¡í•´ì§„ ë¡œì§ ì˜®ê¸°ê¸°
* ajaxìš”ì²­ì„ ë§Œë“¤ê³  ìš”ì²­ ê²°ê³¼ì— ë”°ë¼ ì•¡ì…˜ì„ dispatchí•˜ëŠ” ê²ƒê³¼ ê°™ì€ ë¹„ë™ê¸° ë¡œì§ì„ ë§Œë“¤ ë•Œ
* ì—°ì†ì ìœ¼ë¡œ ë˜ëŠ” íƒ€ì„ë¼ì¸ì— ë”°ë¼ ì—¬ëŸ¬ ì‘ì—…ì„ ì „ë‹¬í•´ì•¼í•˜ëŠ” ë¡œì§ì„ ë§Œë“¤ ë•Œ
* ì•¡ì…˜ì— ë‹¤ë¥¸ ìƒíƒœê°’ì„ í¬í•¨ì‹œí‚¤ê¸° ìœ„í•´ `getState`ì ‘ê·¼ê¶Œí•œì´ í•„ìš”í•œ ë¡œì§ì„ ë§Œë“¤ ë•Œ

## ë¯¸ë“¤ì›¨ì–´ë€?
ë¯¸ë“¤ì›¨ì–´ëŠ” Reduxë¥¼ í™•ì¥í•˜ëŠ” ì»¤ìŠ¤í…€ ê¸°ëŠ¥ì´ë©°, ìŠ¤í† ì–´ì˜ dispatch ë©”ì†Œë“œë¥¼ ê°ì‹¸ì¤€ë‹¤. ë¯¸ë“¤ì›¨ì–´ì˜ í•µì‹¬ê¸°ëŠ¥ì€ composableí•˜ë‹¤ëŠ” ê²ƒì´ë‹¤. ì¦‰, ì—¬ëŸ¬ ë¯¸ë“¤ì›¨ì–´ë¥¼ í•¨ê»˜ ê²°í•©í•  ìˆ˜ ìˆê³ , ì—¬ê¸°ì„œ ê° ë¯¸ë“¤ì›¨ì–´ëŠ” ì²´ì¸ì˜ ì „í›„ì— ëŒ€í•œ ì§€ì‹ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤.

ë¯¸ë“¤ì›¨ì–´ì˜ ê°€ì¥ ì¼ë°˜ì ì¸ ì‚¬ìš© ì‚¬ë¡€ëŠ” Rxê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ëŒ€í•œ ì¢…ì†ì„±ì´ë‚˜ ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ ì½”ë“œì—†ì´ ë¹„ë™ê¸° ì‘ì—…ì„ ì§€ì›í•˜ëŠ” ê²ƒì´ë‹¤. ì¼ë°˜ ì‘ì—… ì™¸ì—ë„ ë¹„ë™ê¸° ì‘ì—…ì„ dispatch í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. ë¯¸ë“¤ì›¨ì–´ëŠ” createStoreì— í¬í•¨ë˜ì§€ ì•Šì•˜ê³ , ë¦¬ë•ìŠ¤ ì•„í‚¤í…ì²˜ì˜ ê·¼ë³¸ì ì¸ ë¶€ë¶„ì€ ì•„ë‹ˆì§€ë§Œ í•µì‹¬ì ìœ¼ë¡œ ì§€ì›ë  ë§Œí¼ ìœ ìš©í•˜ê²Œ ì“°ì¸ë‹¤.

## ì‚¬ìš©ë²•
applyMiddlewareëŠ” Reduxë¯¸ë“¤ì›¨ì–´ apië¥¼ ì¤€ìˆ˜í•˜ëŠ” í•¨ìˆ˜ë‹¤. ì•„ë˜ ì˜ˆì‹œì—ì„œ ë³´ë©´, getStateí•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ë°›ëŠ” ìŠ¤í† ì–´ì˜ dispatchë©”ì„œë“œ(logger)ë¥¼ applyMiddlewareì˜ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ê³ , ìµëª…í•¨ìˆ˜ë¥¼ ë¦¬í„´í•œë‹¤. í•´ë‹¹ í•¨ìˆ˜ì—ëŠ” ë¯¸ë“¤ì›¨ì–´ì˜ next ë””ìŠ¤íŒ¨ì¹˜ ë©”ì„œë“œê°€ ì œê³µë˜ë©° nextí•¨ìˆ˜ì— actionì„ ì¸ìˆ˜ë¡œ ì „ë‹¬í•´ì„œ ë¹„ë™ê¸°ì ìœ¼ë¡œ ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê±°ë‚˜, ì•„ì˜ˆ í˜¸ì¶œë˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤. ì²´ì¸ì˜ ë§ˆì§€ë§‰ ë¯¸ë“¤ì›¨ì–´ëŠ” ì‹¤ì œ storeì˜ ë©”ì„œë“œë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ìˆ˜ì‹ í•´ì„œ ì²´ì¸ì„ ì¢…ë£Œí•œë‹¤. ë”°ë¼ì„œ `({getState, dispatch}) => next => action`... ???

```jsx
import { createStore, applyMiddleware } from 'redux';
// todos ë¦¬ë“€ì„œ
import todos from './reducers';

function logger({ getState }) {
  return next => (action) => {
    console.log('will dispatch', action)

    // ë¯¸ë“¤ì›¨ì–´ ì²´ì¸ì˜ ë‹¤ìŒ ë””ìŠ¤íŒ¨ì¹˜ ë°©ë²•ì„ í˜¸ì¶œí•œë‹¤.
    const returnValue = next(action)

    console.log('state after dispatch', getState())

    // ë¯¸ë“¤ì›¨ì–´ê°€ ì´ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ” í•œ, ì´ëŠ” ì‘ì—… ìì²´ê°€ ë  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.
    return returnValue
  }
}

const store = createStore(todos, ['Use Redux'], applyMiddleware(logger))

store.dispatch({
  type: 'ADD_TODO',
  text: 'Understand the middleware'
})
// ì´ ë¼ì¸ì€ ë¯¸ë“¤ì›¨ì–´ì— ì˜í•´ ê¸°ë¡ëœë‹¤.
// dispatchì˜ˆì •: { type: 'ADD_TODO', text: 'Understand the middleware' }
// dispatchí›„ ìƒíƒœ: [ 'Use Redux', 'Understand the middleware' ]
```
