# 13장 다이제스트 인증

```
13.1 다이제스트 인증의 개선점
13.2 요약 계산
13.3 보호 수준(Quality of Protection) 향상
13.4 실제 상황에 대한 고려
13.5 보안에 대한 고려사항
13.6 추가 정보
```

## 13.1 다이제스트 인증의 개선점

> 기본 보안을 안전하게 사용하는 유일한 방법은 SSL과 결합해서 사용하는 것이다. 다이제스트 인증은 기본 인증과 **호환**되는 **더 안전한 대체재**로서 개발되었다.

<details>
  <summary>기본 인증에 비해 다이제스트 인증이 가지는 개선점 및 특징에 대해서 아는대로 설명하라</summary>

- 비밀번호를 보내는 대신, 비밀번호의 요약을 전송한다. 단방향 요약 함수 중 하나인 MD5를 활용하여 임의의 바이트 배열을 원래 길이와 상관없이 128비트 요약으로 변환한다. 하지만 요약을 가로채서 서버로 몇 번이고 재전송할 수도 있다.

- 재전송 방지를 위한 난스를 사용한다. 난스를 비밀번호에 섞으면 난스가 바뀔 때마다 요약도 바뀐다. 서버는 난스를 WWW-Authenticate인증요구 메시지에에 담아서 클라이언트로 넘긴다.

</details>
</br>

<details>
  <summary>기본 인증과 다이제스트 인증 핸드셰이크를 비교하여 설명하라</summary>

### 다이제스트 인증 핸드셰이크

1. 서버는 난스 값을 계산하여 생성한다.
2. 서버는 난스를 WWW-Authenticate인증요구 메시지에 담아, 서버가 지원하는 알고리즘 목록과 함께 클라이언트로 보낸다.
3. 클라이언트는 알고리즘을 선택하고, 응답 요약 및 클라이언트 난스를 생성한다.
4. 서버는 선택된 알고리즘, 요약, 클라이언트 난스 등을 전달받고, 클라이언트가 했던 그대로 요약을 계산한다. 그리고 계산된 요약과 전달받은 요약이 같은지 확인한다.

</details>
</br>

## 13.2 요약 계산

> 다이제스트 인증의 핵심은 공개된 정보, 비밀 정보, 시한부 난스 값을 조합한 단방향 요약이다.

<details>
  <summary>요약에 관련된 알고리즘에 대해서 아는대로 설명하라</summary>

- 요약은 단방향 해시 함수 H(d)와 요약 함수 KD(s-secret, d-data), 보안 정보를 담고 있는 데이터 덩어리 A1, 속성을 담고 있는 데이터 덩어리 A2의 세 요소로부터 계산된다.

</details>
</br>

<details>
  <summary>다이제스트 인증의 여러 안전한 기능을 유지하면서 사전 인가를 할 수 있는 방법들은 무엇인가? (즉, 클라이언트가 WWW-Authenticate 인증요구를 기다리지 않고 올바른 난스를 취득할 수 있는 방법) 그리고 각각의 장단점을 설명하라</summary>

- 서버가 다음 난스를 Authentication-Info 성공 헤더에 담아서 미리 보낸다.
  - 장점: 사전 인가를 통해 요청/인증요구 사이클에서 벗어나 트랜잭션 속도를 향상시킬 수 있다.
  - 단점: 다중 요청 파이프라이닝 능력이 무효화되어, 회전 지연이 불가피해져 성능이 떨어진다.
- 서버가 짧은 시간 동안 같은 난스를 재사용하는 것을 허용한다.
  - 장점: 파이프라이닝하여 성능을 지킬 수 있다.
  - 단점: 난스를 재사용하면 공격자의 재전송 공격이 성공하기 쉬워져서 보안성이 감소된다.
- 클라이언트와 서버가 동기화되어 있고 예측 가능한 난스 생성 알고리즘을 사용한다.

</details>
</br>
