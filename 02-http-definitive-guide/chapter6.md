# 6장 프락시

```
6.1 웹 중개자
6.2 왜 프락시를 사용하는가?
6.3 프락시는 어디에 있는가?
6.4 클라이언트 프락시 설정
6.5 프락시 요청의 미묘한 특징들
6.6 메시지 추적
6.7 프락시 인증
6.8 프락시 상호운용성
6.9 추가 정보
```

## 1. 웹 중개자

<details>
  <summary>웹 중개자로서의 프락시에 대해 설명하라</summary>

- 웹/http 프락시 서버는 서버이자 클라이언트이다.
- 즉, 요청을 서버로 보내는 것과 동시에 요청에 대한 응답을 받는다.
- 하지만 트랜잭션을 마무리하는 것이 클라이언트라는 점은 변하지 않는다.
- 하나의 클라이언트만을 위한 **개인 프락시**와 여러 클라이언트를 위한 **공용 프락시**가 있다.
</details>

<details>
  <summary>프락시와 게이트웨이의 차이점은 무엇인가?</summary>

- 프락시는 같은 프로토콜을 사용하는 둘 이상의 앱을 연결하고, 게이트웨이는 다른 프로토콜을 사용하는 둘 이상의 앱을 연결한다.
</details>

<details>
  <summary>프락시를 사용하는 이유에 대해 아는대로 설명하라</summary>

- 어린이 필터
- 문서 접근 제어자
- 보안 방화벽
- 웹 캐시
- 대리(리버스) 프락시
- 콘텐츠 라우터
- 트랜스코더
- 익명화 프락시
</details>

<details>
  <summary>프락시 계층의 정적 콘텐츠 라우팅과 동적 콘텐츠 라우팅?</summary>

- 정적: 프락시 서버들은 항상 부모와 자식의 관계를 갖고, 인바운드(서버에 가까운 쪽)를 부모, 아웃바운드(클라이언트에 가까운 쪽)을 자식이라고 부른다.
- 동적: 부모 선택은 부하 균형(부모들의 작업량), 지리적 인접성, 프로토콜/타입(URI에 근거), 유료 서비스 등에 따라 라우팅할 수 있다.
</details>

<details>
  <summary>프락시가 트래픽을 처리하는 방법은 무엇인가?</summary>

- 클라이언트를 수정한다.
  - 수동설정, 브라우저 배포시 기본 설정, 프락시 자동 설정(PAC), WPAD프락시 발견(PAC파일을 자동으로 찾아주는 알고리즘)
- 네트워크를 수정한다. => 인터셉트 프락시
- DNS이름공간을 수정한다.
- 웹 서버를 수정한다.

</details>

<details>
  <summary>프락시 URI는 서버 URI와 어떻게 다른가?</summary>

- 서버 요청시: 클라이언트가 프락시를 사용하지 않도록 설정시 **부분 URI**를 보낸다.
- 프락시 요청시: 클라이언트가 프락시를 사용하도록 설정시 **스킴, 호스트(및 포트번호)를 포함한 완전한 URI**를 보낸다.

</details>

<details>
  <summary>인터셉트 프락시와 대리 프락시는 부분 URI를 보낸다. 이때의 프락시 요청은 어떤식으로 처리되는가?</summary>

- 대리 프락시 자체가 서버의 호스트명과 아이피 주소를 사용해 서버를 대체하는 프락시 서버다.
- 인터셉트 프락시는 클라이언트에서 서버로 가는 트래픽을 가로채기 때문에, 서버로 보내는 부분의 URI를 얻을 수 있다.

</details>

<details>
  <summary>프락시의 완전 URI와 부분 URI를 사용하는 규칙은 무엇인가?</summary>

- 완전 URI가 주어졌다면, 그것을 사용한다.
- 부분 URI가 주어졌고 Host헤더가 있으면, Host헤더를 이용해 서버의 이름(호스트)과 포트 번호를 알아낸다.
- 부분 URI가 주어졌으나 Host헤더가 없으면, 다음의 방법으로 원 서버를 알아낸다.
  - 대리 프락시의 경우, 프락시에 실제 서버의 주소와 포트 번호가 설정되어있다.
  - 인터셉트 프락시의 경우, 가로챘던 트래픽을 받았고 프락시가 원 IP주소와 포트번호를 사용할 수 있도록 해두었다면, 그 IP주소와 포트번호를 사용할 수 있다.

</details>

<details>
  <summary>명시적인 프락시를 사용할 때와 그러지 않을 때의 URI분석의 차이점은 무엇인가?</summary>

- (공통) 사용자가 'abc'를 입력한다.
- 명시적인 프락시를 사용하는 경우
  - 프락시가 명시적으로 설정되었으므로 브라우저는 부분 호스트 명을 자동확장하지 않는다. 브라우저는 DNS를 통해 프락시 서버를 찾는다. 이것은 성공하여 프락시 서버의 ip주소를 얻는다.
  - 브라우저는 프락시에 접속하려고 시도하며, 이것은 성공하여 커넥션이 맺어진다.
- 명시적인 프락시를 사용하지 않는 경우
  - 브라우저는 DNS를 통해 호스트 'abc'를 찾아본다. 이것은 실패한다.
  - 브라우저는 호스트명을 자동으로 확장한 후, DNS에 'www.abc.com'의 주소 분해를 요청한다. 이것은 성공한다.
- (공통) 브라우저는 http요청을 보낸다.

</details>
